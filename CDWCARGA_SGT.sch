#!/bin/sh################################################################################## Shell ejecuta Job DataStage                                                #### Uso:                                                                       #### Ejecuta JOB desde Malla Control-M                                          ####################################################################################============================================================================#################################################################################### Parametros:                                                                #### $1: Fecha de Respaldo (fecha ) entregada por ControlM en formato "YYYYMMDD"#### $2: Fecha Procesos entregada por ControlM en formato "YYYY-MM-DD"          #### $3: Nombre Sequencer                                                       ####                             ####################################################################################============================================================================#################################################################################### Solicitado por:                                                            ####      Banco Chile                                                           #### Elaborado por:                                                             ####      FACTORIT                                                              #### Fecha de Creacion:                                                         ####      2014-06-20                                                            #### Version:                                                                   ####      1.0   RMY                                                             ####      1.1   RMY - Agrega variable severidad                                 ####      1.2   RMY - Agrega validacion de caida por severidad                  ####################################################################################============================================================================### Seteo de Variablessequencer=$3fechaa=$1fechae=$2archlog=/u/ulog/$sequencer.outdatashome=/IBM/InformationServer/Server/DSEngine/binarch_conf_Sev="/u/data/CDW/ConfigSev.txt"proyecto=FactorIT## Setea directoriocd /IBM/InformationServer/Server/DSEngine/. ./dsenvecho "Proceso:" $sequencer > $archlogecho "============================================================" >> $archlogecho "Proceso Ejecutado el dia `date '+%Y-%m-%d %H:%M:%S'`" >> $archlogif [ $# -ne 3 ]then        echo "PROCESO $sequencer FALLIDO ####  Insuficiente numero de parametros" >> $archlog        exit 1fiecho "Fecha de Proceso Ingresada: " $2 >> $archlog## Ejecucion$datashome/dsjob -run -mode NORMAL -wait  -param '$FechaProceso='$fechaa -param '$FechaArchExtraccion='$fechae -jobstatus $proyecto $sequencer## Status Code de la ejecucion del Sequencerrun_stat=$?if [ "$run_stat" == 1 ]; then   DIA_TERM=`date +"%d/%m/%Y %H:%M:%S"`   echo " El proceso se ejecuto correctamente con Status Code: $run_stat" >> $archlog   $datashome/dsjob -jobinfo $proyecto $sequencer >> $archlog   echo "Ejecución Finalizada : $DIA_TERM "                           >> $archlog   exit 0else   DIA_TERM=`date +"%d/%m/%Y %H:%M:%S"`   echo "Proceso ejecutado con errores Status Code: $run_stat"            >> $archlog   $datashome/dsjob -jobinfo $proyecto $sequencer >> $archlog   echo "Ejecución Finalizada  : $DIA_TERM "                          >> $archlog  exit 1fi